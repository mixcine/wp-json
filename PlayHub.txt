local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

local Config = {Duration = 10, FadeTime = 2}

local function CreateInterface()
    local gui = Instance.new("ScreenGui")
    gui.Name = "LynixHubBrookhaven"
    gui.Parent = PlayerGui
    gui.ResetOnSpawn = false
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    gui.IgnoreGuiInset = true
    gui.ScreenInsets = Enum.ScreenInsets.None
    
    local main = Instance.new("Frame")
    main.Parent = gui
    main.BackgroundTransparency = 1
    main.BorderSizePixel = 0
    main.Size = UDim2.new(1, 0, 1, 0)
    main.Position = UDim2.new(0, 0, 0, 0)
    main.ZIndex = 10
    
    local bgImage = Instance.new("ImageLabel")
    bgImage.Parent = main
    bgImage.BackgroundTransparency = 1
    bgImage.BorderSizePixel = 0
    bgImage.Size = UDim2.new(1, 0, 1, 0)
    bgImage.Position = UDim2.new(0, 0, 0, 0)
    bgImage.Image = "rbxassetid://92938877761950"
    bgImage.ScaleType = Enum.ScaleType.Stretch
    bgImage.ZIndex = 1
    
    local center = Instance.new("Frame")
    center.Parent = main
    center.BackgroundTransparency = 1
    center.Size = UDim2.new(0, 700, 0, 150)
    center.Position = UDim2.new(0.5, -400, 0.7, -78)
    center.ZIndex = 20
    
    local title = Instance.new("TextLabel")
    title.Parent = center
    title.BackgroundTransparency = 1
    title.Size = UDim2.new(1, 0, 0, 50)
    title.Position = UDim2.new(0, 0, 0, 0)
    title.Text = "Lynix Hub"
    title.TextColor3 = Color3.fromRGB(0, 0, 0)
    title.TextScaled = true
    title.Font = Enum.Font.GothamBold
    title.ZIndex = 21
    
    local titleStroke = Instance.new("UIStroke")
    titleStroke.Parent = title
    titleStroke.Color = Color3.fromRGB(139, 0, 0)
    titleStroke.Thickness = 4
    titleStroke.Transparency = 0
    
    local progBg = Instance.new("Frame")
    progBg.Parent = center
    progBg.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    progBg.BorderSizePixel = 0
    progBg.Size = UDim2.new(1, 0, 0, 35)
    progBg.Position = UDim2.new(0, 0, 0, 60)
    progBg.ZIndex = 19
    
    local progCorner = Instance.new("UICorner")
    progCorner.CornerRadius = UDim.new(0, 17)
    progCorner.Parent = progBg
    
    local progStroke = Instance.new("UIStroke")
    progStroke.Parent = progBg
    progStroke.Color = Color3.fromRGB(139, 0, 0)
    progStroke.Thickness = 3
    progStroke.Transparency = 0
    
    local progressBar = Instance.new("Frame")
    progressBar.Parent = progBg
    progressBar.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    progressBar.BorderSizePixel = 0
    progressBar.Size = UDim2.new(0, 0, 1, 0)
    progressBar.ZIndex = 20
    
    local barCorner = Instance.new("UICorner")
    barCorner.CornerRadius = UDim.new(0, 17)
    barCorner.Parent = progressBar
    
    local barStroke = Instance.new("UIStroke")
    barStroke.Parent = progressBar
    barStroke.Color = Color3.fromRGB(139, 0, 0)
    barStroke.Thickness = 2
    barStroke.Transparency = 0
    
    local barGrad = Instance.new("UIGradient")
    barGrad.Parent = progressBar
    barGrad.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 0, 0)),
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(50, 0, 0)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 0, 0))
    })
    
    local percentage = Instance.new("TextLabel")
    percentage.Parent = center
    percentage.BackgroundTransparency = 1
    percentage.Size = UDim2.new(1, 0, 0, 40)
    percentage.Position = UDim2.new(0, 0, 0, 110)
    percentage.Text = "0%"
    percentage.TextColor3 = Color3.fromRGB(0, 0, 0)
    percentage.TextScaled = true
    percentage.Font = Enum.Font.GothamBold
    percentage.ZIndex = 21
    
    local percentStroke = Instance.new("UIStroke")
    percentStroke.Parent = percentage
    percentStroke.Color = Color3.fromRGB(139, 0, 0)
    percentStroke.Thickness = 4
    percentStroke.Transparency = 0
    
    return gui, progressBar, percentage, main
end

local function StartLoading()
    local gui, progressBar, percentage, mainFrame = CreateInterface()
    local startTime = tick()
    local function update()
        local elapsed = tick() - startTime
        local progress = math.min(elapsed / Config.Duration, 1)
        local percent = math.floor(progress * 100)
        progressBar:TweenSize(UDim2.new(progress, 0, 1, 0), "Out", "Quart", 0.2, true)
        percentage.Text = percent .. "%"
        if progress >= 1 then
            wait(1)
            local fadeOut = TweenService:Create(mainFrame, TweenInfo.new(Config.FadeTime, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {
                BackgroundTransparency = 1
            })
            fadeOut:Play()
            fadeOut.Completed:Connect(function()
                gui:Destroy()
            end)
            return
        end
        RunService.Heartbeat:Wait()
        update()
    end
    update()
end

StartLoading()

local Libary = loadstring(game:HttpGet("https://raw.githubusercontent.com/ndark5243-arch/Libraryhanzodred/refs/heads/main/Main.txt"))()


workspace.FallenPartsDestroyHeight = -math.huge

local Window = Libary:MakeWindow({
    Title = "Lynix Hub üè° | Brookhaven RP ",
    SubTitle = "by: Shadow and Void777 and God777  ",
    LoadText = "Carregando Lynix Hub",
    Flags = "LynixHub_Broookhaven"
})
Window:AddMinimizeButton({
    Button = { Image = "rbxassetid://92938877761950", BackgroundTransparency = 1 },
    Corner = { CornerRadius = UDim.new(35, 1) },
})

local Tab4 = Window:MakeTab({"House", "Home"})
local Tab9 = Window:MakeTab({"Troll", "skull"})

---------------------------------------------------------------------------------------------------------------------------------
                                          -- === Tab4: House === --
---------------------------------------------------------------------------------------------------------------------------------

Tab4:AddParagraph({
    Title = "Fun√ß√µes para voc√™ usar em voc√™",
    Content = ""
})

-- Bot√£o para remover ban de todas as casas
Tab4:AddButton({
    Name = "Remover Ban de Todas as Casas",
    Description = "Tenta remover o ban de todas as casas ",
    Callback = function()
        local successCount = 0
        local failCount = 0
        for i = 1, 37 do
            local bannedBlockName = "BannedBlock" .. i
            local bannedBlock = Workspace:FindFirstChild(bannedBlockName, true)
            if bannedBlock then
                local success, _ = pcall(function()
                    bannedBlock:Destroy()
                end)
                if success then
                    successCount = successCount + 1
                else
                    failCount = failCount + 1
                end
            end
        end
        for _, house in pairs(Workspace:GetDescendants()) do
            if house.Name:match("BannedBlock") then
                local success, _ = pcall(function()
                    house:Destroy()
                end)
                if success then
                    successCount = successCount + 1
                else
                    failCount = failCount + 1
                end
            end
        end
        if successCount > 0 then
            game.StarterGui:SetCore("SendNotification", {
                Title = "Sucesso",
                Text = "Bans removidos de " .. successCount .. " casas!",
                Duration = 5
            })
        end
        if failCount > 0 then
            game.StarterGui:SetCore("SendNotification", {
                Title = "Aviso",
                Text = "Falha ao remover bans de " .. failCount .. " casas.",
                Duration = 5
            })
        end
        if successCount == 0 and failCount == 0 then
            game.StarterGui:SetCore("SendNotification", {
                Title = "Aviso",
                Text = "Nenhum ban encontrado para remover.",
                Duration = 5
            })
        end
    end
})

-- Fun√ß√£o atualizada para ganhar permiss√£o na casa do jogador selecionado
local function gainHousePermission(targetPlayer)
    if not targetPlayer then return end
    local targetName = targetPlayer.Name
    local lotsFolder = workspace:FindFirstChild("001_Lots")
    if not lotsFolder then 
        game.StarterGui:SetCore("SendNotification", {
            Title = "Erro",
            Text = "Pasta de lotes n√£o encontrada.",
            Duration = 5
        })
        return 
    end
    for _, lot in pairs(lotsFolder:GetChildren()) do
        local housePicked = lot:FindFirstChild("HousePickedByPlayer")
        if housePicked then
            -- Verifica m√∫ltiplas poss√≠veis localiza√ß√µes do Owner
            local ownerValue = housePicked:FindFirstChild("Owner") or housePicked:FindFirstChild("HouseOwner") or housePicked:FindFirstChild("CurrentOwner")
            if ownerValue and (ownerValue.Value == targetName or lot.Name:find(targetName)) then
                local houseModel = housePicked:FindFirstChild("HouseModel")
                if houseModel then
                    local permissions = houseModel:FindFirstChild("Permissions")
                    if permissions and permissions:FindFirstChild("AddRoommate") then
                        local args = {targetPlayer}
                        pcall(function()
                            permissions.AddRoommate:FireServer(unpack(args))
                        end)
                        game.StarterGui:SetCore("SendNotification", {
                            Title = "Permiss√£o Adicionada",
                            Text = "Voc√™ ganhou permiss√£o na casa de " .. targetName,
                            Duration = 5
                        })
                        return
                    end
                end
            end
        end
    end
    game.StarterGui:SetCore("SendNotification", {
        Title = "Falha",
        Text = "Casa de " .. targetName .. " n√£o encontrada. Verifique se o jogador possui uma casa.",
        Duration = 5
    })
end

-- TextBox para digitar nome do player para permiss√£o na casa
Tab4:AddTextBox({
    Name = "Nome do Jogador (Casa)",
    Description = "Digite o nome do jogador para ganhar permiss√£o na casa dele",
    PlaceholderText = "ex: mnwnemm",
    Callback = function(Value)
        local targetPlayer = Players:FindFirstChild(Value)
        if targetPlayer then
            gainHousePermission(targetPlayer)
        else
            game.StarterGui:SetCore("SendNotification", {
                Title = "Jogador N√£o Encontrado",
                Text = "Jogador '" .. Value .. "' n√£o encontrado.",
                Duration = 5
            })
        end
    end
})

Tab4:AddParagraph({
    Title = "to sem ideias para colocar aqui._.",
    Content = ""
})

---------------------------------------------------------------------------------------------------------------------------------
                                                   -- === Tab 9: troll === --
-----------------------------------------------------------------------------------------------------------------------------------

        
-- Fun√ß√£o para equipar a bola (atualizada com remote correto)
local function equipBola()
    local backpack = LocalPlayer:WaitForChild("Backpack")
    local bola = backpack:FindFirstChild("SoccerBall") or LocalPlayer.Character:FindFirstChild("SoccerBall")
    if not bola then
        -- Usa o remote de filterClick primeiro (capturado)
        local argsFilter = {
            "filterClick",
            {
                name = "SoccerBall",
                itemType = "Tools"
            }
        }
        pcall(function()
            ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("TelemetryClientInteraction"):FireServer(unpack(argsFilter))
        end)
        task.wait(0.1)
        -- Depois PickingTools
        local argsEquip = { "PickingTools", "SoccerBall" }
        local success = pcall(function()
            ReplicatedStorage:WaitForChild("RE"):WaitForChild("1Too1l"):InvokeServer(unpack(argsEquip))
        end)
        if not success then return false end
        repeat
            bola = backpack:FindFirstChild("SoccerBall")
            task.wait(0.1)  -- Wait menor para evitar lag
        until bola or task.wait(3)
        if not bola then return false end
    end
    if bola.Parent ~= LocalPlayer.Character then
        bola.Parent = LocalPlayer.Character
    end
    return true
end

-- Fling com Bola (melhorado: teleporte persistente, colis√£o forte, fling ao void)
local function flingWithBall(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return end
    local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    local myHRP = character:FindFirstChild("HumanoidRootPart")
    if not humanoid or not myHRP then return end
    if not equipBola() then return end
    task.wait(0.3)  -- Wait reduzido
    -- Delete tool para spawnar bola no workspace
    local argsDelete = { "PlayerWantsToDeleteTool", "SoccerBall" }
    pcall(function()
        ReplicatedStorage:WaitForChild("RE"):WaitForChild("1Clea1rTool1s"):FireServer(unpack(argsDelete))
    end)
    task.wait(0.3)
    local workspaceCom = Workspace:FindFirstChild("WorkspaceCom")
    if not workspaceCom then return end
    local soccerBalls = workspaceCom:FindFirstChild("001_SoccerBalls")
    if not soccerBalls then return end
    soccerBall = soccerBalls:FindFirstChild("Soccer" .. LocalPlayer.Name)
    if not soccerBall then return end
    -- Configura√ß√µes para colis√£o persistente
    originalProperties = {
        Anchored = soccerBall.Anchored,
        CanCollide = soccerBall.CanCollide,
        CanTouch = soccerBall.CanTouch
    }
    soccerBall.Anchored = false
    soccerBall.CanCollide = true
    soccerBall.CanTouch = true
    soccerBall.AssemblyLinearVelocity = Vector3.new(0, 0, 0)  -- Reset velocity inicial
    SetNetworkOwnerEvent:FireServer(soccerBall, LocalPlayer)  -- Ownership para replica√ß√£o
    savedPosition = myHRP.Position
    -- Desabilita colis√£o do personagem local
    for _, part in ipairs(character:GetDescendants()) do
        if part:IsA("BasePart") then 
            part.CanCollide = false 
            SetNetworkOwnerEvent:FireServer(part, LocalPlayer)
        end
    end
    if humanoid then
        humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, false)
        humanoid.Sit = false
    end
    -- Desabilita seats para evitar interfer√™ncia
    for _, seat in ipairs(Workspace:GetDescendants()) do
        if seat:IsA("Seat") or seat:IsA("VehicleSeat") then seat.Disabled = true end
    end
    pcall(function()
        ReplicatedStorage:WaitForChild("RE"):WaitForChild("1Clothe1s"):FireServer("CharacterSizeDown", 4)
    end)
    running = true
    local lastFlingTime = 0
    local flingStrength = 1000000  -- For√ßa alta para void
    connection = RunService.Heartbeat:Connect(function()
        if not running or not targetPlayer.Character then return end
        local hrp = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        local hum = targetPlayer.Character:FindFirstChild("Humanoid")
        local myHRP = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if not hrp or not hum or not myHRP then return end
        -- Teleporte persistente da bola para colidir com o alvo
        local targetPos = hrp.Position + Vector3.new(math.random(-1,1), 2, math.random(-1,1))  -- Offset pequeno para colis√£o
        soccerBall.CFrame = CFrame.new(targetPos)
        soccerBall.AssemblyLinearVelocity = Vector3.new(math.random(-50,50), -flingStrength, math.random(-50,50))  -- Velocity para void cont√≠nua
        -- Segue o alvo com o personagem local
        myHRP.CFrame = CFrame.new(soccerBall.Position + Vector3.new(0, 3, 0))
        -- Spam throw para for√ßa extra (usando remote capturado)
        local throwCFrame = CFrame.new(hrp.Position)
        local argsThrow = {throwCFrame}
        pcall(function()
            if LocalPlayer.Character:FindFirstChild("SoccerBall") then
                LocalPlayer.Character.SoccerBall.FootballInteraction:FireServer(unpack(argsThrow))
            end
        end)
    end)
    -- Loop de fling ao detectar proximidade
    flingConnection = RunService.Heartbeat:Connect(function()
        if not running or not targetPlayer.Character then return end
        local hrp = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        if not hrp then return end
        local dist = (soccerBall.Position - hrp.Position).Magnitude
        if dist < 4 and tick() - lastFlingTime > 0.1 then  -- Fling mais frequente
            lastFlingTime = tick()
            -- Desabilita colis√£o do alvo temporariamente
            for _, part in ipairs(targetPlayer.Character:GetDescendants()) do
                if part:IsA("BasePart") then 
                    part.CanCollide = false 
                    SetNetworkOwnerEvent:FireServer(part, LocalPlayer)
                end
            end
            -- Aplica BodyVelocity forte para void
            local fling = Instance.new("BodyVelocity")
            fling.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            fling.Velocity = Vector3.new(math.random(-100,100), -flingStrength * 2, math.random(-100,100))  -- Direto para void
            fling.Parent = hrp
            task.delay(0.5, function()
                if fling and fling.Parent then fling:Destroy() end
                -- Reabilita colis√£o do alvo
                for _, part in ipairs(targetPlayer.Character:GetDescendants()) do
                    if part:IsA("BasePart") then part.CanCollide = true end
                end
            end)
        end
    end)
    -- Para ap√≥s 15s ou se alvo sentar
    task.spawn(function()
        task.wait(15)
        if running then
            running = false
            stopFling()
        end
    end)
end

-- Fun√ß√£o de Ball Void Kill (spam melhorado para n√£o visual)
local function ballVoidKill(targetPlayer)
    if not targetPlayer or not targetPlayer.Character then return end
    equipBola()
    task.wait(0.5)
    local argsDelete = {"PlayerWantsToDeleteTool", "SoccerBall"}
    pcall(function()
        ReplicatedStorage:WaitForChild("RE"):WaitForChild("1Clea1rTool1s"):FireServer(unpack(argsDelete))
    end)
    task.wait(0.3)
    local workspaceCom = Workspace:FindFirstChild("WorkspaceCom")
    if not workspaceCom then return end
    local soccerBalls = workspaceCom:FindFirstChild("001_SoccerBalls")
    if not soccerBalls then return end
    local ball = soccerBalls:FindFirstChild("Soccer" .. LocalPlayer.Name)
    if not ball then return end
    SetNetworkOwnerEvent:FireServer(ball, LocalPlayer)
    ball.Anchored = false
    ball.CanCollide = true
    -- Spam 20 throws com velocity para void
    for i = 1, 20 do
        local targetHRP = targetPlayer.Character:FindFirstChild("HumanoidRootPart")
        if targetHRP then
            local throwCFrame = CFrame.new(targetHRP.Position + Vector3.new(0, 5, 0))
            local argsThrow = {throwCFrame}
            pcall(function()
                if LocalPlayer.Character:FindFirstChild("SoccerBall") then
                    LocalPlayer.Character.SoccerBall.FootballInteraction:FireServer(unpack(argsThrow))
                else
                    ball.CFrame = throwCFrame
                    ball.AssemblyLinearVelocity = Vector3.new(math.random(-200,200), -500000, math.random(-200,200))  -- For√ßa extrema para void
                end
            end)
        end
        task.wait(0.05)  -- Spam r√°pido
    end
    game.StarterGui:SetCore("SendNotification", {
        Title = "Ball Void Kill",
        Text = targetPlayer.Name .. " foi flinged para o void com ball spam.",
        Duration = 3
    })
end

-- KillWithBus (melhorado com ownership e fling imediato)
local function killWithBus(targetPlayer)
    if not targetPlayer or not targetPlayer.Character or not LocalPlayer.Character then return end
    local character = LocalPlayer.Character
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    local myHRP = character:FindFirstChild("HumanoidRootPart")
    if not humanoid or not myHRP then return end
    savedPosition = myHRP.Position
    pcall(function()
        myHRP.Anchored = true
        myHRP.CFrame = CFrame.new(Vector3.new(1181.83, 76.08, -1158.83))
        task.wait(0.2)
        myHRP.Velocity = Vector3.zero
        myHRP.RotVelocity = Vector3.zero
        myHRP.Anchored = false
        if humanoid then humanoid:ChangeState(Enum.HumanoidStateType.GettingUp) end
    end)
    task.wait(0.5)

    disableCarClient()

    local args = { [1] = "DeleteAllVehicles" }
    pcall(function()
        ReplicatedStorage:WaitForChild("RE"):WaitForChild("1Ca1r"):FireServer(unpack(args))
    end)
    args = { [1] = "PickingCar", [2] = "SchoolBus" }
    pcall(function()
        ReplicatedStorage:WaitForChild("RE"):WaitForChild("1Ca1r"):FireServer(unpack(args))
    end)
    task.wait(1)
    local vehiclesFolder = Workspace:FindFirstChild("Vehicles")
    if not vehiclesFolder then return end
    local busName = LocalPlayer.Name .. "Car"
    local bus = vehiclesFolder:FindFirstChild(busName)
    if not bus then return end
    pcall(function()
        myHRP.Anchored = true
        myHRP.CFrame = CFrame.new(Vector3.new(1171.15, 79.45, -1166.2))
        task.wait(0.2)
        myHRP.Velocity = Vector3.zero
        myHRP.RotVelocity = Vector3.zero
        myHRP.Anchored = false
        humanoid:ChangeState(Enum.HumanoidStateType.Seated)
    end)
    local sitStart = tick()
    repeat
        task.wait()
        if tick() - sitStart > 10 then return end
    until humanoid.Sit
    -- Configura√ß√µes para colis√£o e ownership
    for _, part in ipairs(bus:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = false
            SetNetworkOwnerEvent:FireServer(part, LocalPlayer)  -- Ownership para replica√ß√£o
        end
    end
    running = true
    connection = RunService.Stepped:Connect(function()
        if not running then return end
        for _, part in ipairs(character:GetDescendants()) do
            if part:IsA("BasePart") then part.CanCollide = false end
        end
    end)
    local lastUpdate = tick()
    local updateInterval = 0.03  -- Mais r√°pido para sync
    local startTime = tick()
    flingConnection = RunService.Heartbeat:Connect(function()
        if not running then return end
        local targetCharacter = targetPlayer.Character or targetPlayer.CharacterAdded:Wait()
        local newTargetHRP = targetCharacter:FindFirstChild("HumanoidRootPart")
        local newTargetHumanoid = targetCharacter:FindFirstChild("Humanoid")
        if not newTargetHRP or not newTargetHumanoid then return end
        if not myHRP or not humanoid then running = false return end
        if tick() - lastUpdate < updateInterval then return end
        lastUpdate = tick()
        local offset = Vector3.new(math.random(-5,5), 0, math.random(-5,5))
        pcall(function()
            local targetPosition = newTargetHRP.Position + offset
            bus:PivotTo(
                CFrame.new(targetPosition) * CFrame.Angles(
                    math.rad(Workspace.DistributedGameTime * 15000),  -- Rota√ß√£o mais agressiva
                    math.rad(Workspace.DistributedGameTime * 18000),
                    math.rad(Workspace.DistributedGameTime * 20000)
                )
            )
        end)
        local playerSeated = false
        for _, seat in ipairs(bus:GetDescendants()) do
            if (seat:IsA("Seat") or seat:IsA("VehicleSeat")) and seat.Name ~= "VehicleSeat" then
                if seat.Occupant == newTargetHumanoid then
                    playerSeated = true
                    break
                end
            end
        end
        if playerSeated or tick() - startTime > 8 then  -- Tempo reduzido para kill r√°pido
            running = false
            if connection then connection:Disconnect() connection = nil end
            if flingConnection then flingConnection:Disconnect() flingConnection = nil end
            -- Fling imediato do bus para void
            pcall(function()
                bus:PivotTo(CFrame.new(0, -1000, 0))
                bus.AssemblyLinearVelocity = Vector3.new(0, -500000, 0)  -- Velocity extra para void
            end)
            task.wait(0.3)

            disableCarClient()

            local args = { [1] = "DeleteAllVehicles" }
            pcall(function()
                ReplicatedStorage:WaitForChild("RE"):WaitForChild("1Ca1r"):FireServer(unpack(args))
            end)
            -- Reset local player
            if character then
                local myHRP = character:FindFirstChild("HumanoidRootPart")
                if myHRP and savedPosition then
                    pcall(function()
                        myHRP.Anchored = true
                        myHRP.CFrame = CFrame.new(savedPosition + Vector3.new(0, 5, 0))
                        task.wait(0.2)
                        myHRP.Velocity = Vector3.zero
                        myHRP.RotVelocity = Vector3.zero
                        myHRP.Anchored = false
                        if humanoid then humanoid:ChangeState(Enum.HumanoidStateType.GettingUp) end
                    end)
                end
            end
            if character then
                for _, part in ipairs(character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = true
                        part.Velocity = Vector3.zero
                        part.RotVelocity = Vector3.zero
                    end
                end
            end
            local myHumanoid = character and character:FindFirstChild("Humanoid")
            if myHumanoid then myHumanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, true) end
            for _, seat in ipairs(Workspace:GetDescendants()) do
                if seat:IsA("Seat") or seat:IsA("VehicleSeat") then seat.Disabled = false end
            end
            pcall(function()
                ReplicatedStorage:WaitForChild("RE"):WaitForChild("1Clothe1s"):FireServer("CharacterSizeUp", 1)
            end)
        end
    end)
end

-- Piggyback Kill (mantido, mas com wait otimizado)
local function piggybackKill(targetPlayer)
    if not targetPlayer then return end
    local args = {
        "Client2Client",
        "Request: Piggyback!",
        targetPlayer
    }
    pcall(function()
        ReplicatedStorage:WaitForChild("RE"):WaitForChild("1Playe1rTrigge1rEven1t"):FireServer(unpack(args))
    end)
    task.wait(0.3)  -- Wait menor para sync
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(0, -500, 0)
        LocalPlayer.Character.HumanoidRootPart.AssemblyLinearVelocity = Vector3.new(0, -100000, 0)  -- For√ßa extra
    end
    game.StarterGui:SetCore("SendNotification", {
        Title = "Piggyback Kill",
        Text = targetPlayer.Name .. " foi puxado para o void.",
        Duration = 3
    })
end

-- StopFling (atualizado para resetar bola/bus melhor)
local function stopFling()
    running = false
    if connection then connection:Disconnect() connection = nil end
    if flingConnection then flingConnection:Disconnect() flingConnection = nil end
    if soccerBall then
        soccerBall.Anchored = originalProperties.Anchored or true
        soccerBall.CanCollide = originalProperties.CanCollide or false
        soccerBall.CanTouch = originalProperties.CanTouch or false
        soccerBall.AssemblyLinearVelocity = Vector3.zero  -- Reset velocity
    end
    if couch and couch:IsA("BasePart") then
        couch.Anchored = originalProperties.Anchored or true
        couch.CanCollide = originalProperties.CanCollide or false
        couch.CanTouch = originalProperties.CanTouch or false
    end

    disableCarClient()

    local args = { [1] = "DeleteAllVehicles" }
    pcall(function()
        ReplicatedStorage:WaitForChild("RE"):WaitForChild("1Ca1r"):FireServer(unpack(args))
    end)
    task.wait(0.2)
    local character = LocalPlayer.Character
    if character then
        for _, part in ipairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
                part.Velocity = Vector3.zero
                part.RotVelocity = Vector3.zero
            end
        end
    end
    local myHumanoid = character and character:FindFirstChild("Humanoid")
    if myHumanoid then myHumanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, true) end
    for _, seat in ipairs(Workspace:GetDescendants()) do
        if seat:IsA("Seat") or seat:IsA("VehicleSeat") then seat.Disabled = false end
    end
    pcall(function()
        ReplicatedStorage:WaitForChild("RE"):WaitForChild("1Clothe1s"):FireServer("CharacterSizeUp", 1)
    end)
    if savedPosition then
        local myHRP = character and character:FindFirstChild("HumanoidRootPart")
        if myHRP then
            pcall(function()
                myHRP.Anchored = true
                myHRP.CFrame = CFrame.new(savedPosition + Vector3.new(0, 5, 0))
                task.wait(0.2)
                myHRP.Velocity = Vector3.zero
                myHRP.RotVelocity = Vector3.zero
                myHRP.Anchored = false
                if myHumanoid then myHumanoid:ChangeState(Enum.HumanoidStateType.GettingUp) end
            end)
        end
    end
end

-- Bot√µes atualizados (adicione no Tab9)
Tab9:AddButton({
    Name = "Matar (Sof√°/Bus)",
    Callback = function()
        if not selectedPlayer or not selectedKillPullMethod then return end
        if selectedKillPullMethod == "Sof√°" then killWithSofa(selectedPlayer) end
        if selectedKillPullMethod == "√înibus" then killWithBus(selectedPlayer) end
    end
})

Tab9:AddButton({
    Name = "Ball Fling/Kill",
    Callback = function()
        if not selectedPlayer then return end
        flingWithBall(selectedPlayer)  -- Fling com bola melhorado
    end
})

Tab9:AddButton({
    Name = "Piggyback Kill",
    Callback = function()
        if not selectedPlayer then return end
        piggybackKill(selectedPlayer)
    end
})

Tab9:AddButton({
    Name = "Ball Void Kill (Spam)",
    Callback = function()
        if not selectedPlayer then return end
        ballVoidKill(selectedPlayer)
    end
})

flingToggle:Callback(function(state)
    if state and selectedFlingMethod == "Bola" then
        if not selectedPlayer then flingToggle:Set(false) return end
        flingWithBall(selectedPlayer)
    elseif not state then
        stopFling()
    end
end)


-------hobz

flingToggle = Tab9:AddToggle({
    Name = "Ativar Fling",
    Description = "Ativa ou desativa o fling com o m√©todo selecionado",
    Default = false,
    Callback = function(state)
        if state then
            if isFollowingKill or isFollowingPull or running then
                flingToggle:Set(false)
                return
            end
            if selectedFlingMethod == "Sof√°" then
                flingWithSofa(selectedPlayer)
            elseif selectedFlingMethod == "Bola" then
                flingWithBall(selectedPlayer)
            -- Adicione as outras se necess√°rio, com SetNetworkOwner
            end
        else
            stopFling()
        end
    end
})

-- Resto do c√≥digo para fling ALL permanece o mesmo, com SetNetworkOwner adicionado no ball

print("Lynix Hub atualizado com fixes para house e kill n√£o visual!")

